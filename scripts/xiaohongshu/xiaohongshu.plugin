# ==UserScript==
# @ScriptName        Â∞èÁ∫¢‰π¶ÂéªÂπøÂëä
# @Author            @ddgksf2013
# @ForHelp           Ëã•ÊúâÂ±èËîΩÂπøÂëäÁöÑÈúÄÊ±ÇÔºåÂèØÂÖ¨‰ºóÂè∑ÂêéÂè∞ÂõûÂ§çAPPÂêçÁß∞
# @WechatID          ÂÖ¨‰ºóÂè∑Â¢®È±ºÊâãËÆ∞
# @TgChannel         https://t.me/ddgksf2021
# @Contribute        https://t.me/ddgksf2013_bot
# @MainFunction      ÂéªÂºÄÂ±è„ÄÅÁÄëÂ∏ÉÊµÅ„ÄÅÂêØÂä®ÊúçÂä°ÂπøÂëäÂèä‰∏Ä‰∫õÈöêÁßÅ„ÄÅÂπøÂëä„ÄÅÈùíÂ∞ëÂπ¥ËØ∑Ê±ÇÔºåÂéªÊ∞¥Âç∞ÂèäÂäüËÉΩÂ¢ûÂº∫
# @Feedback          üìÆ ddgksf2013@163.com üìÆ
# @UpdateTime        2023-06-08
# @Function          ÂéªÂπøÂëäÈÖçÁΩÆÔºàËá™Áî®Ôºå‰∏çÂÆöÊúüÊõ¥Êñ∞Ôºâ
# @Suitable          Ëá™Ë°åËßÇÁúã‚Äú# > ‚ÄùÊ≥®ÈáäÂÜÖÂÆπ
# @Attention         Â¶ÇÈúÄÂºïÁî®ËØ∑Ê≥®ÊòéÂá∫Â§ÑÔºåË∞¢Ë∞¢Âêà‰ΩúÔºÅ
# @ScriptURL         https://github.com/ddgksf2013/Rewrite/raw/master/AdBlock/XiaoHongShu.conf
# ==/UserScript==

#!name = Â∞èÁ∫¢‰π¶ÂéªÂπøÂëä
#!desc = ËøáÊª§Â∞èÁ∫¢‰π¶ÂπøÂëäÔºåÁßªÈô§ÂõæÁâáÂèäËßÜÈ¢ëÊ∞¥Âç∞„ÄÇ
#!icon = https://bpic.588ku.com/element_pic/18/07/04/d037a17cea4650dad0bfaf3063a9e30b.jpg

[Script]
# > Â∞èÁ∫¢‰π¶_ËßÜÈ¢ëÊí≠ÊîæÈ°µÂïÜÂìÅÊé®Âπø@ddgksf2013
http-response ^https?:\/\/edith\.xiaohongshu\.com\/api\/sns\/v\d\/note\/widgets script-path = https://github.com/ddgksf2013/Scripts/raw/master/redbook_json.js, requires-body = true, tag = Â∞èÁ∫¢‰π¶_ËßÜÈ¢ëÊí≠ÊîæÈ°µÂïÜÂìÅÊé®Âπø
http-response ^https?:\/\/edith\.xiaohongshu\.com\/api\/sns\/v\d\/note\/redtube\? script-path = https://github.com/ddgksf2013/Scripts/raw/master/redbook_json.js, requires-body = true, tag = Â∞èÁ∫¢‰π¶_Áü≠ËßÜÈ¢ëÊµÅÂéªÊ∞¥Âç∞+Âº∫Âà∂ÂºÄÂêØ‰øùÂ≠òÂäüËÉΩ@ddgksf2013
http-response ^https?:\/\/edith\.xiaohongshu\.com\/api\/sns\/v\d\/note\/videofeed\? script-path = https://github.com/ddgksf2013/Scripts/raw/master/redbook_json.js, requires-body = true, tag = Â∞èÁ∫¢‰π¶_‰ø°ÊÅØÊµÅËßÜÈ¢ëÂéªÊ∞¥Âç∞+Âº∫Âà∂ÂºÄÂêØ‰øùÂ≠òÂäüËÉΩ@ddgksf2013
http-response ^https?:\/\/edith\.xiaohongshu\.com\/api\/sns\/v\d\/note\/feed\? script-path = https://github.com/ddgksf2013/Scripts/raw/master/redbook_json.js, requires-body = true, tag = Â∞èÁ∫¢‰π¶_‰ø°ÊÅØÊµÅÂõæÁâáÂéªÊ∞¥Âç∞@ddgksf2013
http-response ^https?:\/\/edith\.xiaohongshu\.com\/api\/sns\/v\d\/system_service\/splash_config script-path = https://github.com/ddgksf2013/Scripts/raw/master/redbook_json.js, requires-body = true, tag = Â∞èÁ∫¢‰π¶_ÂºÄÂ±èÂπøÂëä@ddgksf2013
http-response ^https?:\/\/edith\.xiaohongshu\.com\/api\/sns\/v\d\/homefeed\? script-path = https://github.com/ddgksf2013/Scripts/raw/master/redbook_json.js, requires-body = true, tag = Â∞èÁ∫¢‰π¶_È¶ñÈ°µÁÄëÂ∏ÉÊµÅ@ddgksf2013
http-response ^https?:\/\/edith\.xiaohongshu\.com\/api\/sns\/v\d\/system_service\/config\? script-path = https://github.com/ddgksf2013/Scripts/raw/master/redbook_json.js, requires-body = true, tag = Â∞èÁ∫¢‰π¶_ÂêØÂä®Â§ÑÁêÜ@ddgksf2013
http-response ^https?:\/\/edith\.xiaohongshu\.com\/api\/sns\/v\d\/search\/hot_list script-path = https://github.com/ddgksf2013/Scripts/raw/master/redbook_json.js, requires-body = true, tag = Â∞èÁ∫¢‰π¶_ÁÉ≠ÊêúÂèëÁé∞@ddgksf2013
http-response ^https?:\/\/edith\.xiaohongshu\.com\/api\/sns\/v\d\/search\/hint script-path = https://github.com/ddgksf2013/Scripts/raw/master/redbook_json.js, requires-body = true, tag = Â∞èÁ∫¢‰π¶_ÈªòËÆ§Â°´ËØç@ddgksf2013
http-response ^https?:\/\/edith\.xiaohongshu\.com\/api\/sns\/v\d\/homefeed\/categories script-path = https://github.com/ddgksf2013/Scripts/raw/master/redbook_json.js, requires-body = true, tag = Â∞èÁ∫¢‰π¶_ÂéªÈô§Ë¥≠Áâ©@ddgksf2013
http-response ^https?:\/\/edith\.xiaohongshu\.com\/api\/sns\/v\d\/search\/trending script-path = https://github.com/ddgksf2013/Scripts/raw/master/redbook_json.js, requires-body = true, tag = Â∞èÁ∫¢‰π¶_Áåú‰Ω†ÊÉ≥Êêú@ddgksf2013
http-response ^https?:\/\/www\.xiaohongshu\.com\/api\/sns\/v\d\/(tag\/)?ads script-path = https://github.com/ddgksf2013/Scripts/raw/master/redbook_json.js, requires-body = true, tag = Â∞èÁ∫¢‰π¶_ÈÄöÁî®ÂπøÂëäËØ∑Ê±Ç@ddgksf2013


# http-response ^https?:\/\/edith\.xiaohongshu\.com\/api\/sns\/v\d{1}\/homefeed\/categories? script-path=https://raw.githubusercontent.com/sorachandesu/s/t/scripts/xiaohongshu/xiaohongshu.js, requires-body=true, tag=Â∞èÁ∫¢‰π¶-È¶ñÈ°µtabÂàÜÁ±ª
# http-response ^https?:\/\/edith\.xiaohongshu\.com\/api\/sns\/v\d{1}\/system_service\/config? script-path=https://raw.githubusercontent.com/sorachandesu/s/t/scripts/xiaohongshu/xiaohongshu.js, requires-body=true, tag=Â∞èÁ∫¢‰π¶-appËÆæÁΩÆ
# http-response ^https?:\/\/edith\.xiaohongshu\.com\/api\/sns\/v\d{1}\/homefeed? script-path=https://raw.githubusercontent.com/sorachandesu/s/t/scripts/xiaohongshu/xiaohongshu.js, requires-body=true, tag=Â∞èÁ∫¢‰π¶-È¶ñÈ°µfeedÂπøÂëä
# http-response ^https?:\/\/www\.xiaohongshu\.com\/api\/sns\/v\d{1}\/tag\/ads_engage script-path=https://raw.githubusercontent.com/sorachandesu/s/t/scripts/xiaohongshu/xiaohongshu.js, requires-body=true, tag=Â∞èÁ∫¢‰π¶-ÂπøÂëä
# http-response ^https?:\/\/edith\.xiaohongshu\.com\/api\/sns\/v\d{1}\/system_service\/splash\_config script-path=https://raw.githubusercontent.com/sorachandesu/s/t/scripts/xiaohongshu/xiaohongshu.js, requires-body=true, tag=Â∞èÁ∫¢‰π¶-ÂºÄÂ±èÂπøÂëä


[Rule]
DOMAIN-SUFFIX,crash.xiaohongshu.com,REJECT
DOMAIN-SUFFIX,t2.xiaohongshu.com,REJECT
DOMAIN-SUFFIX,lng.xiaohongshu.com,REJECT
DOMAIN-SUFFIX,as.xiaohongshu.com,REJECT

[URL Rewrite]
# > Â∞èÁ∫¢‰π¶_ÂêØÂä®ÂºïÂØº@ddgksf2013
^https?:\/\/edith\.xiaohongshu\.com\/api\/sns\/v\d\/guide\/home_guide - reject-dict
# > Â∞èÁ∫¢‰π¶_ÈöêÁßÅÂ±èËîΩ@ddgksf2013
^https?:\/\/referee\.xiaohongshu\.com\/v\d\/stateReport - reject-dict
# > Â∞èÁ∫¢‰π¶_Switches@ddgksf2013
^https?:\/\/pages\.xiaohongshu\.com\/data\/native\/matrix_switches - reject-dict
# > Â∞èÁ∫¢‰π¶_ÈùíÂ∞ëÂπ¥ËØ∑Ê±Ç@ddgksf2013
^https?:\/\/edith\.xiaohongshu\.com\/api\/sns\/v\d\/user\/teenager\/status - reject-dict
^https:\/\/www\.xiaohongshu\.com\/api\/marketing\/box\/trigger\? - reject-dict
^https:\/\/edith\.xiaohongshu\.com\/api\/sns\/v1\/surprisebox\/(get_style\?|open\?|submit_action$) - reject-dict
^https?:\/\/www\.xiaohongshu\.com\/speedtest - reject-dict
^https?:\/\/www\.xiaohongshu\.com\/api\/sns\/v\d{1}\/ads\/apple\/record - reject-dict
^https?:\/\/www\.xiaohongshu\.com\/api\/sns\/v\d{1}\/ads\/resource? - reject-dict
^https?:\/\/edith\.xiaohongshu\.com\/api\/huidu\/* - reject-dict
^https?:\/\/edith\.xiaohongshu\.com\/api\/sns\/v\d{1}\/homefeed\/client\_downgrade\/report - reject-dict
^https?:\/\/edith\.xiaohongshu\.com\/api\/sns\/v\d{1}\/system\_service\/permission\/report - reject-dict
^https?:\/\/edith\.xiaohongshu\.com\/api\/sns\/v\d{1}\/note\/metrics\_report - reject-dict
^https?:\/\/www\.xiaohongshu\.com\/api\/sns\/v\d{1}\/system\_service/popup\_window? - reject-dict
# ^https?:\/\/edith\.xiaohongshu\.com\/api\/sns\/v\d{1}\/note\/widgets - reject-dict
# ^https?:\/\/edith\.xiaohongshu\.com\/api\/sns\/v\d{1}\/system\_service\/splash\_config - reject-dict

[MITM]
hostname = edith.xiaohongshu.com, www.xiaohongshu.com, pages.xiaohongshu.com, referee.xiaohongshu.com
